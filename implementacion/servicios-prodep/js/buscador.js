function doHighlight(e,r,t,o){t&&o||(t="<font style='color:blue; background-color:yellow;'>",o="</font>");for(var n="",h=-1,i=r.toLowerCase(),g=e.toLowerCase();e.length>0;)(h=g.indexOf(i,h+1))<0?(n+=e,e=""):e.lastIndexOf(">",h)>=e.lastIndexOf("<",h)&&g.lastIndexOf("/script>",h)>=g.lastIndexOf("<script",h)&&(n+=e.substring(0,h)+t+e.substr(h,r.length)+o,g=(e=e.substr(h+r.length)).toLowerCase(),h=-1);return n}function highlightSearchTerms(e,r,t,o,n){if(searchArray=r?[e]:e.split(" "),!document.body||void 0===document.body.innerHTML)return t&&alert("Lo sentimos, no hay resultados con los datos ingresados."),!1;for(var h=document.body.innerHTML,i=0;i<searchArray.length;i++)h=doHighlight(h,searchArray[i],o,n);return document.body.innerHTML=h,!0}function searchPrompt(e,r,t,o){return e||(e=""),t&&o?(highlightStartTag="<font style='color:"+t+"; background-color:"+o+";'>",highlightEndTag="</font>"):(highlightStartTag="",highlightEndTag=""),promptText="Ingrese un termino de busqueda",searchText=prompt(promptText,e),searchText?highlightSearchTerms(searchText,r,!0,highlightStartTag,highlightEndTag):(alert("Lo sentimos, no se han encontrado coincidencias con los t√©rminos ingresados."),!1)}function highlightGoogleSearchTerms(e){if(!e)return!1;var r=e.toLowerCase().indexOf("q=");if(r<0||r+"q=".length==e.length)return!1;var t=e.indexOf("&",r);t<0&&(t=e.length);var o=e.substring(r+"q=".length,t);return highlightSearchTerms(o=(o=(o=(o=o.replace(/%20/gi," ")).replace(/\+/gi," ")).replace(/%22/gi,"")).replace(/\"/gi,""),!1)}function testHighlightGoogleSearchTerms(){var e="http://www.google.com/search?q=javascript%20highlight&start=0";return highlightGoogleSearchTerms(e=prompt("Test the following referrer string:",e))}